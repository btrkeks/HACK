<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Durchführung - Multiple Choice</title>
</head>
<body>
<main>
    <h1>Test Durchführung</h1>

    <form th:action="@{/tests/{testId}/execute/multiplechoice/{questionIndex}(testId=${testSet.id},questionIndex=${currentQuestionIndex})}"
          th:object="${multipleChoiceAntwortForm}"
          method="post">

        <!-- Question section -->
        <article>
            <header>
                <p>
                        <span aria-label="Maximale Punktzahl">
                            (<span th:text="${question.maximalePunktzahl().points()}">0</span> Punkte)
                        </span>
                </p>
                <!-- th:utext da HTML in der Fragestellung erlaubt ist -->
                <div th:utext="${question.getFragestellung()}"
                     role="heading"
                     aria-level="2"></div>
            </header>

            <!-- Answer options -->
            <fieldset>
                <legend>Antwortmöglichkeiten</legend>
                <label type="hidden" th:field="*{frageId}"></label>
                <div th:each="option : ${question.optionen}">
                    <input type="checkbox"
                           th:field="*{selectedIds}"
                           th:value="${option.id}"
                           th:id="'option__' + ${option.id}">
                    <label th:for="'option__' + ${option.id}"
                           th:text="${option.text}">
                        Option Text
                    </label>
                </div>
            </fieldset>

            <!-- Question navigation -->
            <nav aria-label="Fragen Navigation">
                <!-- Navigation buttons -->
                <div role="group" aria-label="Navigation zwischen Fragen">
                    <button type="submit"
                            name="action"
                            value="previous"
                            th:if="${hasPreviousQuestion}"
                            aria-label="Zur vorherigen Frage">
                        Zurück
                    </button>

                    <!-- Progress information -->
                    <span th:text="|Frage ${currentQuestionIndex + 1} von ${testSet.fragen().size()}|">
                    Frage 1 von 1
                    </span>

                    <button type="submit"
                            name="action"
                            value="next"
                            th:if="${hasNextQuestion}"
                            aria-label="Zur nächsten Frage">
                        Weiter
                    </button>

                    <button type="submit"
                            name="action"
                            value="finish"
                            th:if="${!hasNextQuestion}"
                            aria-label="Test beenden">
                        Test beenden
                    </button>
                </div>
            </nav>
        </article>
    </form>
</main>
</body>
</html>